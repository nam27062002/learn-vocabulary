{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% block title %}{{ deck.name }} - {{ manual_texts.my_decks }}{% endblock %}

{% block content %}

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <div class="flex justify-between items-center mb-8 pb-4 border-b border-gray-700">
        <h1 class="text-4xl font-extrabold text-white">{{ deck.name }}</h1>
        <a href="{% url 'deck_list' %}" class="text-primary-color hover:text-primary-color-dark font-semibold transition-colors duration-200">‚Üê {{ manual_texts.back_to_all_decks }}</a>
    </div>

    {% if flashcards %}
        <div id="carousel-container" class="relative w-full max-w-xl mx-auto overflow-hidden rounded-xl shadow-2xl bg-gray-800 p-6">
            <div id="carousel-slides" class="flex overflow-x-scroll no-scrollbar snap-x snap-mandatory" style="scroll-behavior: auto;">
                {% for card in flashcards %}
                    <div class="flex-shrink-0 snap-center" style="width: 100%;">
                        <div class="word-item-tailwind p-6 bg-gray-900 rounded-lg shadow-lg w-full max-w-md mx-auto text-white flex flex-col items-start">
                            <div class="text-3xl font-bold mb-2">
                                <a href="https://dictionary.cambridge.org/dictionary/english/{{ card.word }}" target="_blank" class="hover:underline focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-offset-2 focus:ring-offset-gray-900">{{ card.word }}</a>
                            </div>
                            {% if card.part_of_speech %}
                                <div class="text-lg text-gray-400 mb-2 italic">({{ card.part_of_speech }})</div>
                            {% endif %}
                            {% if card.phonetic %}
                                <div class="text-lg text-gray-400 font-serif italic mb-4 flex items-center space-x-2">
                                    <span>{{ card.phonetic }}</span>
                                    {% if card.audio_url %}
                                        <button class="audio-icon-tailwind text-gray-500 hover:text-primary-color transition-colors duration-200" data-audio-url="{{ card.audio_url }}">
                                            <i class="fas fa-volume-up text-xl"></i>
                                        </button>
                                    {% endif %}
                                </div>
                            {% endif %}
                            {% for def in card.definitions.all %}
                                <div class="text-base text-gray-300 leading-relaxed mb-2">
                                    <span class="font-semibold text-primary-color">{% trans "EN:" %}</span> {{ def.english_definition }}
                                </div>
                                <div class="text-base text-gray-300 leading-relaxed mb-2">
                                    <span class="font-semibold text-primary-color">{% trans "VI:" %}</span> {{ def.vietnamese_definition }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
            <button id="prevBtn" class="absolute top-1/2 left-2 -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white p-3 rounded-full hover:bg-opacity-100 transition-all duration-200 z-10 focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-offset-2 focus:ring-offset-gray-800">
                <i class="fas fa-chevron-left text-xl"></i>
            </button>
            <button id="nextBtn" class="absolute top-1/2 right-2 -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white p-3 rounded-full hover:bg-opacity-100 transition-all duration-200 z-10 focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-offset-2 focus:ring-offset-gray-800">
                <i class="fas fa-chevron-right text-xl"></i>
            </button>
        </div>
        <div id="pagination-dots" class="text-center mt-6 space-x-2"></div>
    {% else %}
        <p class="text-gray-400 text-center text-lg mt-10">{% trans "This deck is empty." %} <a href="{% url 'add_flashcard' %}" class="text-primary-color hover:underline">{% trans "Add some cards!" %}</a></p>
    {% endif %}
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/deck_detail.js' %}"></script>
{% endblock %} 